<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>集合框架 | 北川的个人博客</title><meta name="keywords" content="集合"><meta name="author" content="北川,1656473414@qq.com"><meta name="copyright" content="北川"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="集合框架"><meta name="application-name" content="集合框架"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="集合框架"><meta property="og:url" content="https://gukeyang.github.io/posts/7edb9ee1.html"><meta property="og:site_name" content="北川的个人博客"><meta property="og:description" content="Java中的集合分类1. Collection 接口 List：有序、可重复，支持索引访问。   ArrayList：动态数组，随机访问快，增删慢（非线程安全）。 LinkedList：双向链表，增删快，随机访问慢。 Vector：线程安全的动态数组（性能较低，不推荐使用）。   Set：无序、唯一"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://s2.loli.net/2025/10/23/g4UkwyDri9BWZtE.jpg?_r_=15bc3fef-3044-c8b4-4d1c-cc585f957842"><meta property="article:author" content="北川"><meta property="article:tag" content="博客,笔记,学习"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2025/10/23/g4UkwyDri9BWZtE.jpg?_r_=15bc3fef-3044-c8b4-4d1c-cc585f957842"><meta name="description" content="Java中的集合分类1. Collection 接口 List：有序、可重复，支持索引访问。   ArrayList：动态数组，随机访问快，增删慢（非线程安全）。 LinkedList：双向链表，增删快，随机访问慢。 Vector：线程安全的动态数组（性能较低，不推荐使用）。   Set：无序、唯一"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://gukeyang.github.io/posts/7edb9ee1"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: undefined,
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"","mailMd5":"3932F24FA213E964B6B1B0FD091F88CE"},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: {"apiurl":"https://friends.anheyu.com/"},
  navMusic: true,
  mainTone: {"mode":"both","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🔨 设计开发一条龙","🏃 脚踏实地行动派"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":true,"limitCount":50,"languages":{"author":"作者: 北川","link":"链接: ","source":"来源: 北川的个人博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '北川的个人博客',
  title: '集合框架',
  postAI: '',
  pageFillDescription: 'Java中的集合分类, 1. Collection 接口, 2. Map 接口, Java中的线程安全的集合是什么？, Java 集合遍历的常见方式, 一、List 的遍历方式, 1.for-each 增强 for 循环, 2. Iterator 显式迭代, 3. 传统 for 循环（带索引）, 4. Lambda 表达式 x2F forEach, 5. Stream 流式遍历, 二、Map 的遍历方式, 1. 遍历 keySet, 2. 遍历 entrySet（推荐）, 3. 遍历 values, 4. 使用 Iterator, 5. 使用 Lambda, ArrayList的扩容机制说一下, HashMap实现原理介绍一下？, HashMap的扩容机制介绍一下, HashMap存取过程, 1. put 方法过程（存储键值对）, 2. get 方法过程（获取键对应的值）, 什么是哈希冲突？怎么解决哈希冲突？, 说说你对 ConcurrentHashMap 的了解中的集合分类接口有序可重复支持索引访问动态数组随机访问快增删慢非线程安全双向链表增删快随机访问慢线程安全的动态数组性能较低不推荐使用无序唯一元素不能重复基于哈希表实现元素需重写和维护插入顺序的哈希表基于红黑树实现元素需实现接口或提供保证元素有序队列或双端队列实现了接口支持双向队列操作优先队列基于堆结构元素按自然顺序或自定义比较器排序动态数组实现的双端队列性能优于接口哈希表实现键值对无序允许键和值非线程安全维护插入顺序或访问顺序的哈希表基于红黑树键需实现或提供保证键有序线程安全的哈希表不允许键值性能较低不推荐使用线程安全的高效哈希表推荐在多线程环境使用中的线程安全的集合是什么在包中的线程安全的类主要个其他都是非线程安全的线程安全的动态数组其内部方法基本都经过修饰如果不需要线程安全并不建议选择毕竟同步是有额外开销的内部是使用对象数组来保存数据可以根据需要自动的增加容量当数组已满时会创建新的数组并拷贝原有数组数据线程安全的哈希表的加锁方法是给每个方法加上关键字这样锁住的是整个对象不支持键和值由于同步导致的性能开销所以已经很少被推荐使用如果要保证线程安全的哈希表可以用包提供的都是线程安全的集合并发它与的主要区别是二者加锁粒度的不同在加的是分段锁也就是锁每个含有整个的一部分这样不同分段之间的并发操作就互不影响在它取消了字段直接在元素上加锁实现对每一行进行加锁进一步减小了并发冲突的概率对于操作如果对应的数组元素为则通过操作将其设置为当前值如果对应的数组元素也即链表表头或者树的根元素不为则对该元素使用关键字申请锁然后进行操作如果该操作使得当前链表长度超过一定阈值则将该链表转换为红黑树从而提高寻址效率实现了一个基于跳表算法的可排序的并发集合是一种可以在对数预期时间内完成搜索插入删除等操作的数据结构通过维护多个指向其他元素的跳跃链接来实现高效查找并发是线程安全的有序的集合底层是使用实现是线程安全的实现它是线程安全的无序的集合可以将它理解成线程安全的有意思的是和虽然都继承于共同的父类但是是通过散列表实现的而则是通过动态数组实现的并不是散列表并发它是的线程安全的变体其中所有写操作等都通过对底层数组进行全新复制来实现允许存储元素即当对象进行写操作时使用了锁做同步处理内部拷贝了原数组并在新数组上进行添加操作最后将新数组替换掉旧数组若进行的读操作则直接返回结果操作过程中不需要进行同步集合遍历的常见方式一的遍历方式增强循环最常用语法最简洁底层其实是使用实现的只是语法糖编译后会变成显式迭代更灵活可以在遍历中安全删除元素安全删除注意如果直接会触发并发修改异常因为集合在创建迭代器后被结构性修改结构性修改指增删元素会破坏迭代器的一致性传统循环带索引适用于类型随机访问快不适用于因为时间复杂度是整体变成表达式从开始支持函数式遍历或者使用方法引用特点可读性好不支持在遍历中删除元素否则也会抛流式遍历也是之后的新方式支持并行处理如果是大集合可以用并行流注意是顺序执行是多线程执行但不保证输出顺序一致流式适合做过滤映射聚合等复杂操作二的遍历方式的遍历比要多几种组合方式遍历缺点会重复查找效率稍低遍历推荐效率高直接访问键值对对象遍历仅遍历值不要键使用使用最简洁的写法推荐在使用的扩容机制说一下在添加元素时如果当前元素个数已经达到了内部数组的容量上限就会触发扩容操作的扩容操作主要包括以下几个步骤计算新的容量一般情况下新的容量会扩大为原容量的倍在之后扩容策略做了调整然后检查是否超过了最大容量限制创建新的数组根据计算得到的新容量创建一个新的更大的数组将元素复制将原来数组中的元素复制到新数组中底层使用复制老数组到新数组更新引用将内部指向原数组的引用指向新数组完成扩容扩容完成后可以继续添加新元素的扩容操作涉及到数组的复制和内存的重新分配所以在频繁添加大量元素时扩容操作可能会影响性能为了减少扩容带来的性能损耗可以在初始化时预分配足够大的容量避免频繁触发扩容操作之所以扩容是倍是因为可以充分利用移位操作减少浮点数或者运算时间和运算次数实现原理介绍一下在版本之前数据结构是数组和链表通过哈希算法将元素的键映射到数组中的槽位如果多个键映射到同一个槽位它们会以链表的形式存储在同一个槽位上因为链表的查询时间是所以冲突很严重一个索引上的链表非常长效率就很低了所以在版本的时候做了优化当一个链表的长度超过的时候就转换数据结构不再使用链表存储而是使用红黑树查找时使用红黑树时间复杂度可以提高查询性能但是在数量较少时即数量小于时会将红黑树转换回链表的扩容机制介绍一下初始容量与负载因子默认初始容量是负载因子默认是负载因子是一个衡量满的程度的参数扩容时机当中的键值对数量达到容量乘以负载因子时就会触发扩容扩容方式扩容时新容量是原容量的倍在扩容过程中需要重新计算每个键值对在新数组中的位置并重新插入这是因为是根据键的哈希值来确定存储位置的数组大小变化后哈希值对应的存储位置可能会改变在之前重新计算位置较为复杂需要重新计算哈希值在中利用了哈希值的高位来简化计算提高了扩容效率扩容过程创建一个新数组其长度为原数组的两倍遍历原数组中的每个桶重新计算每个键值对的哈希值根据新的哈希值将键值对迁移到新数组的对应位置存取过程方法过程存储键值对计算哈希值对调用方法得到原始哈希值再通过内部的哈希算法如扰动函数处理减少哈希冲突确定桶位置根据处理后的哈希值与数组长度进行运算等价于取模效率更高得到该对应的数组下标桶位置处理桶位置的元素若桶为空无元素直接创建新节点中为链表节点或树节点放入该桶若桶不为空检查桶中首个节点的与当前是否相等相同且为若相等则覆盖旧值若不相等遍历桶中的链表或红黑树若找到相同的节点覆盖旧值若未找到在链表尾部添加新节点若链表长度超过阈值默认将链表转为红黑树扩容检查插入后若哈希表的元素总数超过阈值容量负载因子则触发扩容创建新数组容量翻倍将旧数组中的元素重新哈希并迁移到新数组中方法过程获取键对应的值计算哈希值与一致对计算处理后的哈希值确定桶位置通过哈希值定位到对应的桶数组下标查找对应节点若桶为空返回若桶不为空检查桶中首个节点的是否与目标相等若相等则返回对应若不相等遍历桶中的链表或红黑树若找到相同的节点返回其若遍历结束仍未找到返回什么是哈希冲突怎么解决哈希冲突什么是碰撞哈希碰撞也叫哈希冲突是指在哈希函数的应用中不同的输入数据经过哈希函数计算后得到相同的哈希值的现象这是由于哈希函数将无限的输入空间映射到有限的输出空间所导致的必然结果哈希碰撞产生的原因哈希函数的设计目标是将不同的输入尽可能的均匀分布到哈希表的不同位置然而无论哈希函数设计的多么巧妙由于输入数据的可能性是无限的哈希值的范围是有限的所以不可避免的出现不同输入数据产生相同哈希值的情况解决哈希碰撞的方法链地址法原理在哈希表的每个槽位中维护一个链表当发生哈希碰撞时将具有相同哈希值的元素依次插入到对应的链表中优点实现简单插入和查找操作的平均时间复杂度在哈希表负载因子合理的情况下接近链表可以动态扩展无需预先知道数据的数量缺点当链表过长时查找效率会下降时间复杂度可能退化为其中是链表的长度此外链表需要额外的指针空间来维护节点之间的连接开放地址法线性探测法原理当发生哈希碰撞时从产生碰撞的哈希地址开始依次探测下一个地址直到找到一个空闲的槽位来插入元素例如假设哈希表大小为元素经过哈希函数计算得到地址若地址已被占用就依次探测地址直到找到空闲位置插入优点不需要额外的链表空间哈希表的空间利用率较高在数据量较小且哈希函数分布均匀的情况下性能较好缺点容易出现聚集现象即连续的多个槽位被占用导致后续插入和查找时需要探测更多的位置性能下降二次探测法原理与线性探测法类似但探测的步长不是固定为而是按照二次函数的方式变化例如第一次探测步长为第二次为第三次为即探测地址从开始递增这样可以减少聚集现象的发生优点减少了线性探测法中的聚集问题提高了哈希表的性能和空间利用率缺点实现相对复杂并且不能完全避免聚集现象当哈希表接近满载时性能仍然会受到影响双重哈希法原理使用两个哈希函数和当发生哈希碰撞时使用第二个哈希函数计算出一个步长然后按照这个步长进行探测例如计算出的哈希地址为若位置已被占用则探测地址优点能更均匀地分布冲突元素减少聚集现象在各种负载情况下都能保持较好的性能缺点需要设计两个哈希函数增加了设计的复杂性并且第二个哈希函数的设计也会影响性能再哈希法原理当冲突发生时采用第二个哈希函数重新计算位置不计算步长例如首次使用冲突后采用优势显著减少聚集现象局限多重哈希计算增加时间成本需精心设计哈希函数组合公共溢出区法原理将哈希表分为基本表和溢出表当发生哈希碰撞时将冲突的元素统一存储在溢出表中基本表存储正常插入且无冲突的元素例如在插入元素时先计算其哈希值若在基本表中该位置未被占用则直接插入若已被占用则插入到溢出表中优点实现相对简单对于解决哈希碰撞有一定效果且基本表的查询效率不受溢出表的影响缺点溢出表的查询效率相对较低因为需要先在基本表查询若未找到再到溢出表查询而且溢出表可能会变得很大影响整体性能说说你对的了解线程安全性是线程安全的哈希表允许多个线程同时读部分线程写它采用了分段锁机制在及之前版本将数据分成多个段每个段有自己的锁不同段的数据可以被不同线程同时修改提高了并发性能在及之后版本摒弃了分段锁机制采用数组加链表红黑树的数据结构并使用操作和关键字来保证线程安全数据结构中由多个组成每个继承自内部包含一个哈希表当对进行写操作时需要先获取对应的锁读操作一般不需要加锁除非读取时发现元素正在被修改中数据结构与类似由数组链表和红黑树组成当链表长度超过一定阈值默认为时链表会转换为红黑树以提高查找性能写操作时对数组中每个桶使用关键字进行同步读操作不加锁但会通过关键字保证可见性并发性能相比在多线程环境下具有更好的并发性能对整个哈希表加锁同一时间只能有一个线程进行读写操作而允许多个线程同时访问不同的段或桶大大提高了并发访问效率适用场景适用于多线程环境下需要高效读写的场景如缓存系统统计系统等既保证线程安全又能提供较好的并发性能',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-10-27 11:55:14',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://s2.loli.net/2022/11/07/QVWvrnAsuGxelbS.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">北川的个人博客</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=2898229193&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/./img/wechat.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src="/./img/wechat.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/./img/alipay.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/./img/alipay.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/" style="font-size: 1.05rem;">JVM内存模型<sup>1</sup></a><a href="/tags/JVM%E8%B0%83%E4%BC%98/" style="font-size: 1.05rem;">JVM调优<sup>1</sup></a><a href="/tags/java%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">java教程<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 1.05rem;">mysql<sup>1</sup></a><a href="/tags/%E5%87%BD%E6%95%B0/" style="font-size: 1.05rem;">函数<sup>1</sup></a><a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 1.05rem;">反射<sup>1</sup></a><a href="/tags/%E5%A4%8D%E4%B9%A0/" style="font-size: 1.05rem;">复习<sup>1</sup></a><a href="/tags/%E5%A4%8D%E4%B9%A0-%E5%8F%98%E9%87%8F/" style="font-size: 1.05rem;">复习 变量<sup>1</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">工具<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 1.05rem;">并发<sup>1</sup></a><a href="/tags/%E6%83%85%E6%84%9F/" style="font-size: 1.05rem;">情感<sup>1</sup></a><a href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB-%E6%8E%A5%E5%8F%A3/" style="font-size: 1.05rem;">抽象类 接口<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.05rem;">数据库<sup>1</sup></a><a href="/tags/%E6%AF%8F%E6%97%A5%E9%9D%A2%E8%AF%95/" style="font-size: 1.05rem;">每日面试<sup>2</sup></a><a href="/tags/%E7%94%B5%E5%95%86-%E8%AE%A2%E5%8D%95/" style="font-size: 1.05rem;">电商,订单<sup>1</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.05rem;">设计模式<sup>1</sup></a><a href="/tags/%E8%B6%85%E5%8D%96-%E5%BA%93%E5%AD%98/" style="font-size: 1.05rem;">超卖 , 库存<sup>1</sup></a><a href="/tags/%E9%9B%86%E5%90%88/" style="font-size: 1.05rem;">集合<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/" itemprop="url">面试题</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E9%9B%86%E5%90%88/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>集合</span></a></span></div></div><h1 class="post-title" itemprop="name headline">集合框架</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-10-23T08:48:49.330Z" title="发表于 2025-10-23 16:48:49">2025-10-23</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-10-27T03:55:14.520Z" title="更新于 2025-10-27 11:55:14">2025-10-27</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="集合框架"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为新乡"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>新乡</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/7edb9ee1.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/posts/7edb9ee1.html" itemprop="commentCount"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://s2.loli.net/2025/10/23/g4UkwyDri9BWZtE.jpg?_r_=15bc3fef-3044-c8b4-4d1c-cc585f957842"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://gukeyang.github.io/posts/7edb9ee1.html"><header><a class="post-meta-categories" href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/" itemprop="url">面试题</a><a href="/tags/%E9%9B%86%E5%90%88/" tabindex="-1" itemprop="url">集合</a><h1 id="CrawlerTitle" itemprop="name headline">集合框架</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">北川</span><time itemprop="dateCreated datePublished" datetime="2025-10-23T08:48:49.330Z" title="发表于 2025-10-23 16:48:49">2025-10-23</time><time itemprop="dateCreated datePublished" datetime="2025-10-27T03:55:14.520Z" title="更新于 2025-10-27 11:55:14">2025-10-27</time></header><h2 id="Java中的集合分类"><a href="#Java中的集合分类" class="headerlink" title="Java中的集合分类"></a>Java中的集合分类</h2><h3 id="1-Collection-接口"><a href="#1-Collection-接口" class="headerlink" title="1. Collection 接口"></a><strong>1. Collection 接口</strong></h3><ul>
<li><p><strong>List</strong>：有序、可重复，支持索引访问。</p>
</li>
<li><ul>
<li><strong>ArrayList</strong>：动态数组，随机访问快，增删慢（非线程安全）。</li>
<li><strong>LinkedList</strong>：双向链表，增删快，随机访问慢。</li>
<li><strong>Vector</strong>：线程安全的动态数组（性能较低，不推荐使用）。</li>
</ul>
</li>
<li><p><strong>Set</strong>：无序、唯一（元素不能重复）。</p>
</li>
<li><ul>
<li><strong>HashSet</strong>：基于哈希表实现，元素需重写 hashCode() 和 equals()。</li>
<li><strong>LinkedHashSet</strong>：维护插入顺序的哈希表。</li>
<li><strong>TreeSet</strong>：基于红黑树实现，元素需实现 Comparable 接口或提供 Comparator，保证元素有序。</li>
</ul>
</li>
<li><p><strong>Queue</strong>：队列（FIFO）或双端队列（Deque）。</p>
</li>
<li><ul>
<li><strong>LinkedList</strong>：实现了 Deque 接口，支持双向队列操作。</li>
<li><strong>PriorityQueue</strong>：优先队列，基于堆结构，元素按自然顺序或自定义比较器排序。</li>
<li><strong>ArrayDeque</strong>：动态数组实现的双端队列，性能优于 LinkedList。</li>
</ul>
</li>
</ul>
<h3 id="2-Map-接口"><a href="#2-Map-接口" class="headerlink" title="2. Map 接口"></a><strong>2. Map 接口</strong></h3><ul>
<li><strong>HashMap</strong>：哈希表实现，键值对无序，允许 null 键和 null 值（非线程安全）。</li>
<li><strong>LinkedHashMap</strong>：维护插入顺序或访问顺序的哈希表。</li>
<li><strong>TreeMap</strong>：基于红黑树，键需实现 Comparable 或提供 Comparator，保证键有序。</li>
<li><strong>Hashtable</strong>：线程安全的哈希表（不允许 null 键值，性能较低，不推荐使用）。</li>
<li><strong>ConcurrentHashMap</strong>：线程安全的高效哈希表（推荐在多线程环境使用）。</li>
</ul>
<h2 id="Java中的线程安全的集合是什么？"><a href="#Java中的线程安全的集合是什么？" class="headerlink" title="Java中的线程安全的集合是什么？"></a>Java中的线程安全的集合是什么？</h2><p>在 java.util 包中的线程安全的类主要2个，其他都是非线程安全的。</p>
<ul>
<li>Vector:线程安全的动态数组，其内部方法基本都经过synchronized修饰，如果不需要线程安全，并不建议选择，毕竟同步是有额外开销的。Vector 内部是使用对象数组来保存数据，可以根据需要自动的增加容量，当数组已满时，会创建新的数组，并拷贝原有数组数据。</li>
<li>Hashtable:线程安全的哈希表，HashTable 的加锁方法是给每个方法加上 synchronized 关键字，这样锁住的是整个 Table 对象，不支持 null键和值，由于同步导致的性能开销，所以已经很少被推荐使用,如果要保证线程安全的哈希表，可以用ConcurrentHashMap。</li>
</ul>
<p>java.util.concurrent 包提供的都是线程安全的集合：</p>
<p>并发map：</p>
<ul>
<li><p>ConcurrentHashMap：它与HashTable的主要区别是二者加锁粒度的不同，在JDK1.7，ConcurrentHashMap加的是分段锁，也就是Segment锁，每个Segment含有整个table的一部分，这样不同分段之间的并发操作就互不影响。在JDK1.8，它取消了Segment字段，直接在table元素上加锁，实现对每一行进行加锁，进一步减小了并发冲突的概率。对于put操作，如果Key对应的数组元素为null，则通过CAS操作（Compare and Swap）将其设置为当前值。如果Key对应的数组元素（也即链表表头或者树的根元素）不为null，则对该元素使用synchronized关键字申请锁，然后进行操作。如果该put操作使得当前链表长度超过一定阈值，则将该链表转换为红黑树，从而提高寻址效率。</p>
</li>
<li><p>ConcurrentSkipListMap：实现了一个基于SkipList（跳表）算法的可排序的并发集合，SkipList是一种可以在对数预期时间内完成搜索、插入、删除等操作的数据结构，通过维护多个指向其他元素的”跳跃”链接来实现高效查找。</p>
</li>
</ul>
<p>并发Set:</p>
<ul>
<li><p>ConcurrentSkipListSet：是线程安全的有序的集合。底层是使用ConcurrentSkipListMap实现。</p>
</li>
<li><p>CopyOnWriteArraySet：是线程安全的Set实现，它是线程安全的无序的集合，可以将它理解成线程安全的HashSet。有意思的是，CopyOnWriteArraySet和HashSet虽然都继承于共同的父类AbstractSet;但是，HashSet是通过”散列表”实现的，而CopyOnWriteArraySet则是通过”动态数组(CopyOnWriteArrayList)”实现的，并不是散列表。</p>
</li>
</ul>
<p>并发List:</p>
<ul>
<li>CopyOnWriteArrayList:它是ArrayList 的线程安全的变体，其中所有写操作（add，set等）都通过对底层数组进行全新复制来实现，允许存储null元素。即当对象进行写操作时，使用了Lock锁做同步处理，内部拷贝了原数组，并在新数组上进行添加操作，最后将新数组替换掉旧数组；若进行的读操作，则直接返回结果，操作过程中不需要进行同步。</li>
</ul>
<h2 id="Java-集合遍历的常见方式"><a href="#Java-集合遍历的常见方式" class="headerlink" title="Java 集合遍历的常见方式"></a>Java 集合遍历的常见方式</h2><h3 id="一、List-的遍历方式"><a href="#一、List-的遍历方式" class="headerlink" title="一、List 的遍历方式"></a>一、List 的遍历方式</h3><h4 id="1-for-each-增强-for-循环"><a href="#1-for-each-增强-for-循环" class="headerlink" title="1.for-each 增强 for 循环"></a>1.<strong>for-each 增强 for 循环</strong></h4><p>最常用、语法最简洁：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (String s : list) &#123;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>底层其实是使用 <strong>Iterator</strong> 实现的，只是语法糖。<br> 编译后会变成：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (Iterator&lt;String&gt; it = list.iterator(); it.hasNext();) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-Iterator-显式迭代"><a href="#2-Iterator-显式迭代" class="headerlink" title="2. Iterator 显式迭代"></a>2. <strong>Iterator 显式迭代</strong></h4><p>更灵活，可以在遍历中安全删除元素：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Iterator&lt;String&gt; it = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;B&quot;</span>.equals(s)) &#123;</span><br><span class="line">        it.remove(); <span class="comment">// ✅ 安全删除</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong><br> 如果直接 <code>list.remove(s)</code> 会触发 <strong>ConcurrentModificationException（并发修改异常）</strong>。<br> 因为集合在创建迭代器后被结构性修改（结构性修改指增删元素）会破坏迭代器的一致性。</p>
<hr>
<h4 id="3-传统-for-循环（带索引）"><a href="#3-传统-for-循环（带索引）" class="headerlink" title="3. 传统 for 循环（带索引）"></a>3. <strong>传统 for 循环（带索引）</strong></h4><p>适用于 <code>List</code> 类型（随机访问快）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">    System.out.println(list.get(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不适用于 <code>LinkedList</code>，因为 <code>get(i)</code> 时间复杂度是 <code>O(n)</code>，整体变成 <code>O(n²)</code>。</p>
<hr>
<h4 id="4-Lambda-表达式-forEach"><a href="#4-Lambda-表达式-forEach" class="headerlink" title="4. Lambda 表达式 &#x2F; forEach"></a>4. <strong>Lambda 表达式 &#x2F; forEach</strong></h4><p>从 Java 8 开始支持函数式遍历：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">list.forEach(s -&gt; System.out.println(s));</span><br></pre></td></tr></table></figure>

<p>或者使用方法引用：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">list.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<p><strong>特点：</strong></p>
<ul>
<li>可读性好；</li>
<li>不支持在遍历中删除元素（否则也会抛 ConcurrentModificationException）。</li>
</ul>
<hr>
<h4 id="5-Stream-流式遍历"><a href="#5-Stream-流式遍历" class="headerlink" title="5. Stream 流式遍历"></a>5. <strong>Stream 流式遍历</strong></h4><p>也是 Java 8 之后的新方式，支持并行处理：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">list.stream().forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<p>如果是大集合，可以用并行流：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">list.parallelStream().forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ul>
<li><code>stream()</code> 是顺序执行；</li>
<li><code>parallelStream()</code> 是多线程执行（但不保证输出顺序一致）；</li>
<li>流式 API 适合做<strong>过滤、映射、聚合</strong>等复杂操作。</li>
</ul>
<hr>
<h3 id="二、Map-的遍历方式"><a href="#二、Map-的遍历方式" class="headerlink" title="二、Map 的遍历方式"></a>二、Map 的遍历方式</h3><p>Map 的遍历比 List 要多几种组合方式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;A&quot;</span>, <span class="number">1</span>);</span><br><span class="line">map.put(<span class="string">&quot;B&quot;</span>, <span class="number">2</span>);</span><br><span class="line">map.put(<span class="string">&quot;C&quot;</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<h4 id="1-遍历-keySet"><a href="#1-遍历-keySet" class="headerlink" title="1. 遍历 keySet"></a>1. 遍历 <code>keySet</code></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">    System.out.println(key + <span class="string">&quot;=&quot;</span> + map.get(key));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>缺点</strong>：<code>get(key)</code> 会重复查找，效率稍低。</p>
<hr>
<h4 id="2-遍历-entrySet（推荐）"><a href="#2-遍历-entrySet（推荐）" class="headerlink" title="2. 遍历 entrySet（推荐）"></a>2. 遍历 <code>entrySet</code>（推荐）</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">    System.out.println(entry.getKey() + <span class="string">&quot;=&quot;</span> + entry.getValue());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效率高，直接访问键值对对象。</p>
<hr>
<h4 id="3-遍历-values"><a href="#3-遍历-values" class="headerlink" title="3. 遍历 values"></a>3. 遍历 <code>values</code></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (Integer value : map.values()) &#123;</span><br><span class="line">    System.out.println(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>仅遍历值，不要键。</p>
<hr>
<h4 id="4-使用-Iterator"><a href="#4-使用-Iterator" class="headerlink" title="4. 使用 Iterator"></a>4. 使用 Iterator</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; it = map.entrySet().iterator();</span><br><span class="line"><span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    Map.Entry&lt;String, Integer&gt; entry = it.next();</span><br><span class="line">    System.out.println(entry.getKey() + <span class="string">&quot;=&quot;</span> + entry.getValue());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="5-使用-Lambda"><a href="#5-使用-Lambda" class="headerlink" title="5. 使用 Lambda"></a>5. 使用 Lambda</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">map.forEach((k, v) -&gt; System.out.println(k + &quot;=&quot; + v));</span><br></pre></td></tr></table></figure>

<p>最简洁的写法，推荐在 Java 8+ 使用。</p>
<h2 id="ArrayList的扩容机制说一下"><a href="#ArrayList的扩容机制说一下" class="headerlink" title="ArrayList的扩容机制说一下"></a>ArrayList的扩容机制说一下</h2><p>ArrayList在添加元素时，如果当前元素个数已经达到了内部数组的容量上限，就会触发扩容操作。<br>ArrayList的扩容操作主要包括以下几个步骤：</p>
<ul>
<li>计算新的容量：一般情况下，新的容量会扩大为原容量的1.5倍（在JDK10之后，扩容策略做了调整），然后检查是否超过了最大容量限制。</li>
<li>创建新的数组：根据计算得到的新容量，创建一个新的更大的数组。</li>
<li>将元素复制：将原来数组中的元素复制到新数组中。**<code>Arrays.copyOf</code>**：底层使用 <code>System.arraycopy</code> 复制老数组到新数组。</li>
<li>更新引用：将ArrayList内部指向原数组的引用指向新数组。</li>
<li>完成扩容：扩容完成后，可以继续添加新元素。</li>
</ul>
<p>ArrayList的扩容操作涉及到数组的复制和内存的重新分配，所以在频繁添加大量元素时，扩容操作可能会影响性能。</p>
<p>为了减少扩容带来的性能损耗，可以在初始化ArrayList时预分配足够大的容量，避免频繁触发扩容操作。之所以扩容是1.5倍，是因为1.5可以充分利用移位操作，减少浮点数或者运算时间和运算次数。</p>
<h2 id="HashMap实现原理介绍一下？"><a href="#HashMap实现原理介绍一下？" class="headerlink" title="HashMap实现原理介绍一下？"></a>HashMap实现原理介绍一下？</h2><p>在JDK1.7版本之前，HashMap数据结构是数组和链表，HashMap通过哈希算法将元素的键（Key）映射到数组中的槽位（Bucket）。如果多个键映射到同一个槽位，它们会以链表的形式存储在同一个槽位上，因为链表的查询时间是O（n），所以冲突很严重，一个索引上的链表非常长，效率就很低了。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.xiaolincoding.com//picgo/1719565480532-57a14329-c36b-4514-8e7d-2f2f1df88a82.webp" alt="img" style="zoom: 67%;" />

<p>所以在JDK1.8版本的时候做了优化，当一个链表的长度超过8的时候就转换数据结构，不再使用链表存储，而是使用红黑树，查找时使用红黑树，时间复杂度O（logn），可以提高查询性能，但是在数量较少时，即数量小于6时，会将红黑树转换回链表。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.xiaolincoding.com//picgo/1719565481289-0c2164f4-f755-46e3-bb39-b5f28621bb6b.webp" alt="img" style="zoom:67%;" />

<h3 id="HashMap的扩容机制介绍一下"><a href="#HashMap的扩容机制介绍一下" class="headerlink" title="HashMap的扩容机制介绍一下"></a>HashMap的扩容机制介绍一下</h3><p>初始容量与负载因子：HashMap 默认初始容量是 16，负载因子默认是 0.75。负载因子是一个衡量 HashMap 满的程度的参数。</p>
<p>扩容时机：当 HashMap 中的键值对数量达到容量乘以负载因子时，就会触发扩容。</p>
<p>扩容方式：扩容时新容量是原容量的 2 倍。在扩容过程中，需要重新计算每个键值对在新数组中的位置并重新插入。这是因为 HashMap 是根据键的哈希值来确定存储位置的，数组大小变化后，哈希值对应的存储位置可能会改变。在 JDK 1.8 之前，重新计算位置较为复杂，需要重新计算哈希值；在 JDK 1.8 中，利用了哈希值的高位来简化计算，提高了扩容效率。</p>
<ol>
<li><p>扩容过程：</p>
</li>
<li><ol>
<li>创建一个新数组，其长度为原数组的两倍。</li>
<li>遍历原数组中的每个桶，重新计算每个键值对的哈希值。</li>
<li>根据新的哈希值，将键值对迁移到新数组的对应位置。</li>
</ol>
</li>
</ol>
<h2 id="HashMap存取过程"><a href="#HashMap存取过程" class="headerlink" title="HashMap存取过程"></a>HashMap存取过程</h2><h3 id="1-put-方法过程（存储键值对）"><a href="#1-put-方法过程（存储键值对）" class="headerlink" title="1. put 方法过程（存储键值对）"></a><strong>1. put 方法过程（存储键值对）</strong></h3><ol>
<li><strong>计算哈希值</strong>对 key 调用 <code>hashCode()</code> 方法得到原始哈希值，再通过 HashMap 内部的哈希算法（如扰动函数）处理，减少哈希冲突。</li>
<li><strong>确定桶位置</strong>根据处理后的哈希值与数组长度进行 <code>&amp;</code> 运算（等价于取模，效率更高），得到该 key 对应的数组下标（桶位置）。</li>
<li><strong>处理桶位置的元素</strong><ul>
<li>若桶为空（无元素）：直接创建新节点（JDK 8 中为链表节点或树节点），放入该桶。</li>
<li>若桶不为空：<ul>
<li>检查桶中首个节点的 key 与当前 key 是否 “相等”（<code>hash</code> 相同且 <code>equals</code> 为 true），若相等则覆盖旧值。</li>
<li>若不相等，遍历桶中的链表或红黑树：<ul>
<li>若找到相同 key 的节点，覆盖旧值。</li>
<li>若未找到，在链表尾部添加新节点；若链表长度超过阈值（默认 8），将链表转为红黑树。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>扩容检查</strong>插入后若哈希表的元素总数（size）超过阈值（容量 × 负载因子），则触发扩容：创建新数组（容量翻倍），将旧数组中的元素重新哈希并迁移到新数组中。</li>
</ol>
<h3 id="2-get-方法过程（获取键对应的值）"><a href="#2-get-方法过程（获取键对应的值）" class="headerlink" title="2. get 方法过程（获取键对应的值）"></a><strong>2. get 方法过程（获取键对应的值）</strong></h3><ol>
<li><strong>计算哈希值</strong>与 <code>put</code> 一致，对 key 计算处理后的哈希值。</li>
<li><strong>确定桶位置</strong>通过哈希值定位到对应的桶（数组下标）。</li>
<li><strong>查找对应节点</strong><ul>
<li>若桶为空，返回 <code>null</code>。</li>
<li>若桶不为空：<ul>
<li>检查桶中首个节点的 key 是否与目标 key 相等，若相等则返回对应 value。</li>
<li>若不相等，遍历桶中的链表或红黑树：<ul>
<li>若找到相同 key 的节点，返回其 value。</li>
<li>若遍历结束仍未找到，返回 <code>null</code>。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="什么是哈希冲突？怎么解决哈希冲突？"><a href="#什么是哈希冲突？怎么解决哈希冲突？" class="headerlink" title="什么是哈希冲突？怎么解决哈希冲突？"></a>什么是哈希冲突？怎么解决哈希冲突？</h2><p><strong>什么是hash碰撞？</strong></p>
<p>哈希碰撞（Hash Collision），也叫哈希冲突，是指在哈希函数的应用中，不同的输入数据经过哈希函数计算后，得到相同的哈希值的现象。这是由于哈希函数将无限的输入空间映射到有限的输出空间所导致的必然结果。</p>
<p><strong>哈希碰撞产生的原因？</strong></p>
<p>哈希函数的设计目标是将不同的输入尽可能的均匀分布到哈希表的不同位置。然而，无论哈希函数设计的多么巧妙，由于输入数据的可能性是无限的，哈希值的范围是有限的，所以不可避免的出现，不同输入数据产生相同哈希值的情况。</p>
<p><strong>解决哈希碰撞的方法</strong></p>
<p><strong>1.</strong> <strong>链地址法（Separate Chaining）</strong></p>
<ul>
<li>原理：在哈希表的每个槽位（bucket）中维护一个链表。<strong>当发生哈希碰撞时，将具有相同哈希值的元素依次插入到对应的链表中。</strong></li>
<li>优点：实现简单，插入和查找操作的平均时间复杂度在哈希表负载因子合理的情况下接近 O (1)。链表可以动态扩展，无需预先知道数据的数量。</li>
<li>缺点：当链表过长时，查找效率会下降，时间复杂度可能退化为 O (n)，其中 n 是链表的长度。此外，链表需要额外的指针空间来维护节点之间的连接。</li>
</ul>
<p><strong>2.</strong> <strong>开放地址法（Open Addressing）</strong></p>
<ul>
<li><p>线性探测法（Linear Probing）：</p>
</li>
<li><ul>
<li>原理：当发生哈希碰撞时，<strong>从产生碰撞的哈希地址开始，依次探测下一个地址，直到找到一个空闲的槽位来插入元素。</strong>例如，假设哈希表大小为 10，元素 A 经过哈希函数计算得到地址 3，若地址 3 已被占用，就依次探测地址 4、5、6…… 直到找到空闲位置插入 A。</li>
<li>优点：不需要额外的链表空间，哈希表的空间利用率较高。在数据量较小且哈希函数分布均匀的情况下，性能较好。</li>
<li>缺点：容易出现 “聚集” 现象，即连续的多个槽位被占用，导致后续插入和查找时需要探测更多的位置，性能下降。</li>
</ul>
</li>
<li><p>二次探测法（Quadratic Probing）：</p>
</li>
<li><ul>
<li>原理：与线性探测法类似，但探测的步长不是固定为 1，而是<strong>按照二次函数的方式变化</strong>。例如，第一次探测步长为 1，第二次为 4，第三次为 9…… 即探测地址 hash(key) + i^2（i 从 1 开始递增）。这样可以减少 “聚集” 现象的发生。</li>
<li>优点：减少了线性探测法中的聚集问题，提高了哈希表的性能和空间利用率。</li>
<li>缺点：实现相对复杂，并且不能完全避免聚集现象，当哈希表接近满载时，性能仍然会受到影响。</li>
</ul>
</li>
<li><p>双重哈希法（Double Hashing）：</p>
</li>
<li><ul>
<li>原理：<strong>使用两个哈希函数</strong> <strong>hash1(key)</strong> <strong>和</strong> **hash2(key)**<strong>。当发生哈希碰撞时，使用第二个哈希函数</strong> <strong>hash2(key)</strong> <strong>计算出一个步长，然后按照这个步长进行探测</strong>。例如，hash1(key) 计算出的哈希地址为 h1，若 h1 位置已被占用，则探测地址 (h1 + hash2(key)) % table_size。</li>
<li>优点：能更均匀地分布冲突元素，减少聚集现象，在各种负载情况下都能保持较好的性能。</li>
<li>缺点：需要设计两个哈希函数，增加了设计的复杂性，并且第二个哈希函数的设计也会影响性能。</li>
</ul>
</li>
</ul>
<p><strong>3.</strong> <strong>再哈希法（Rehashing）</strong></p>
<ul>
<li><p><strong>原理</strong>‌：当冲突发生时，采用第二个哈希函数重新<strong>计算位置</strong>。不计算步长。例如首次使用h1(key)&#x3D;key%7，冲突后采用h2(key)&#x3D;key%13+1。‌‌2‌‌8</p>
</li>
<li><p>‌<strong>优势</strong>‌：显著减少聚集现象。</p>
</li>
<li><p>‌<strong>局限</strong>‌：多重哈希计算增加时间成本，需精心设计哈希函数组合。</p>
</li>
</ul>
<p><strong>4.</strong> <strong>公共溢出区法</strong></p>
<ul>
<li>原理：<strong>将哈希表分为基本表和溢出表。</strong>当发生哈希碰撞时，将冲突的元素统一存储在溢出表中。基本表存储正常插入且无冲突的元素。例如，在插入元素时，先计算其哈希值，若在基本表中该位置未被占用，则直接插入；若已被占用，则插入到溢出表中。</li>
<li>优点：实现相对简单，对于解决哈希碰撞有一定效果，且基本表的查询效率不受溢出表的影响。</li>
<li>缺点：溢出表的查询效率相对较低，因为需要先在基本表查询，若未找到再到溢出表查询。而且溢出表可能会变得很大，影响整体性能。</li>
</ul>
<h2 id="说说你对-ConcurrentHashMap-的了解"><a href="#说说你对-ConcurrentHashMap-的了解" class="headerlink" title="说说你对 ConcurrentHashMap 的了解"></a><strong>说说你对 ConcurrentHashMap 的了解</strong></h2><ul>
<li><ul>
<li><p><strong>线程安全性</strong>：ConcurrentHashMap是线程安全的哈希表，允许多个线程同时读，部分线程写。它采用了分段锁（Segment）机制（在 JDK 1.7 及之前版本），将数据分成多个段，每个段有自己的锁，不同段的数据可以被不同线程同时修改，提高了并发性能。在 JDK 1.8 及之后版本，摒弃了分段锁机制，采用数组加链表（红黑树）的数据结构，并使用 CAS（Compare - And - Swap）操作和Synchronized关键字来保证线程安全。</p>
</li>
<li><p><strong>数据结构</strong>：</p>
</li>
<li><ul>
<li>JDK 1.7 中，ConcurrentHashMap由多个Segment组成，每个Segment继承自ReentrantLock，内部包含一个哈希表。当对ConcurrentHashMap进行写操作时，需要先获取对应Segment的锁，读操作一般不需要加锁，除非读取时发现元素正在被修改。</li>
<li>JDK 1.8 中，数据结构与HashMap类似，由数组、链表和红黑树组成。当链表长度超过一定阈值（默认为 8）时，链表会转换为红黑树，以提高查找性能。写操作时，对数组中每个桶（bucket）使用Synchronized关键字进行同步，读操作不加锁，但会通过 volatile 关键字保证可见性。</li>
</ul>
</li>
<li><p><strong>并发性能</strong>：相比Hashtable，ConcurrentHashMap在多线程环境下具有更好的并发性能。Hashtable对整个哈希表加锁，同一时间只能有一个线程进行读写操作；而ConcurrentHashMap允许多个线程同时访问不同的段（JDK 1.7）或桶（JDK 1.8），大大提高了并发访问效率。</p>
</li>
<li><p><strong>适用场景</strong>：适用于多线程环境下需要高效读写的场景，如缓存系统、统计系统等，既保证线程安全，又能提供较好的并发性能。</p>
</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/QVWvrnAsuGxelbS.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/QVWvrnAsuGxelbS.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">北川</div><div class="post-copyright__author_desc">Believe in yourself</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://gukeyang.github.io/posts/7edb9ee1.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://gukeyang.github.io/posts/7edb9ee1.html')">集合框架</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/./img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./img/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/./img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./img/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wecaht/"><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>运营模式与责任</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://gukeyang.github.io/posts/7edb9ee1.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=集合框架&amp;url=https://gukeyang.github.io/posts/7edb9ee1.html&amp;pic=https://s2.loli.net/2025/10/23/g4UkwyDri9BWZtE.jpg?_r_=15bc3fef-3044-c8b4-4d1c-cc585f957842" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://gukeyang.github.io" target="_blank">北川的个人博客</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E9%9B%86%E5%90%88/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>集合<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2025/10/23/wfbr2eNcL1VvXIn.png?_r_=c8b8c4d9-3b05-f070-2b01-ec5fb5e468d4" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/aff6963e.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2025/10/23/YUHOf5MZEItlGd3.jpg?_r_=1d335fd2-520a-5de8-b607-f2b3e5a780fa" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">如何解决高并发下的库存抢购超卖少买问题？</div></div></a></div><div class="next-post pull-right"><a href="/posts/498cfd8e.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2025/10/23/w3ErpsQhncfDed2.jpg?_r_=e93610d2-afe5-62c9-ffac-34bc6ede57ce" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">并发编程</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/QVWvrnAsuGxelbS.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/zc998800/cdn/face/gif/m17.gif" ait="status"/></div></div><div class="author-info__description">路慢其修远兮 吾将上下而求索</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">北川</h1><div class="author-info__desc">Believe in yourself</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/gukeyang" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1542898061" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://s2.loli.net/2023/10/19/vNio4QGBSX9x5lO.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Java%E4%B8%AD%E7%9A%84%E9%9B%86%E5%90%88%E5%88%86%E7%B1%BB"><span class="toc-number">1.</span> <span class="toc-text">Java中的集合分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Collection-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.1.</span> <span class="toc-text">1. Collection 接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Map-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.2.</span> <span class="toc-text">2. Map 接口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java%E4%B8%AD%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E9%9B%86%E5%90%88%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">Java中的线程安全的集合是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E9%9B%86%E5%90%88%E9%81%8D%E5%8E%86%E7%9A%84%E5%B8%B8%E8%A7%81%E6%96%B9%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">Java 集合遍历的常见方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81List-%E7%9A%84%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text">一、List 的遍历方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-for-each-%E5%A2%9E%E5%BC%BA-for-%E5%BE%AA%E7%8E%AF"><span class="toc-number">3.1.1.</span> <span class="toc-text">1.for-each 增强 for 循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Iterator-%E6%98%BE%E5%BC%8F%E8%BF%AD%E4%BB%A3"><span class="toc-number">3.1.2.</span> <span class="toc-text">2. Iterator 显式迭代</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BC%A0%E7%BB%9F-for-%E5%BE%AA%E7%8E%AF%EF%BC%88%E5%B8%A6%E7%B4%A2%E5%BC%95%EF%BC%89"><span class="toc-number">3.1.3.</span> <span class="toc-text">3. 传统 for 循环（带索引）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F-forEach"><span class="toc-number">3.1.4.</span> <span class="toc-text">4. Lambda 表达式 &#x2F; forEach</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Stream-%E6%B5%81%E5%BC%8F%E9%81%8D%E5%8E%86"><span class="toc-number">3.1.5.</span> <span class="toc-text">5. Stream 流式遍历</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Map-%E7%9A%84%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">二、Map 的遍历方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%81%8D%E5%8E%86-keySet"><span class="toc-number">3.2.1.</span> <span class="toc-text">1. 遍历 keySet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%81%8D%E5%8E%86-entrySet%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-number">3.2.2.</span> <span class="toc-text">2. 遍历 entrySet（推荐）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E9%81%8D%E5%8E%86-values"><span class="toc-number">3.2.3.</span> <span class="toc-text">3. 遍历 values</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8-Iterator"><span class="toc-number">3.2.4.</span> <span class="toc-text">4. 使用 Iterator</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E4%BD%BF%E7%94%A8-Lambda"><span class="toc-number">3.2.5.</span> <span class="toc-text">5. 使用 Lambda</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ArrayList%E7%9A%84%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6%E8%AF%B4%E4%B8%80%E4%B8%8B"><span class="toc-number">4.</span> <span class="toc-text">ArrayList的扩容机制说一下</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HashMap%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%EF%BC%9F"><span class="toc-number">5.</span> <span class="toc-text">HashMap实现原理介绍一下？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HashMap%E7%9A%84%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B"><span class="toc-number">5.1.</span> <span class="toc-text">HashMap的扩容机制介绍一下</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HashMap%E5%AD%98%E5%8F%96%E8%BF%87%E7%A8%8B"><span class="toc-number">6.</span> <span class="toc-text">HashMap存取过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-put-%E6%96%B9%E6%B3%95%E8%BF%87%E7%A8%8B%EF%BC%88%E5%AD%98%E5%82%A8%E9%94%AE%E5%80%BC%E5%AF%B9%EF%BC%89"><span class="toc-number">6.1.</span> <span class="toc-text">1. put 方法过程（存储键值对）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-get-%E6%96%B9%E6%B3%95%E8%BF%87%E7%A8%8B%EF%BC%88%E8%8E%B7%E5%8F%96%E9%94%AE%E5%AF%B9%E5%BA%94%E7%9A%84%E5%80%BC%EF%BC%89"><span class="toc-number">6.2.</span> <span class="toc-text">2. get 方法过程（获取键对应的值）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81%EF%BC%9F%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81%EF%BC%9F"><span class="toc-number">7.</span> <span class="toc-text">什么是哈希冲突？怎么解决哈希冲突？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B4%E8%AF%B4%E4%BD%A0%E5%AF%B9-ConcurrentHashMap-%E7%9A%84%E4%BA%86%E8%A7%A3"><span class="toc-number">8.</span> <span class="toc-text">说说你对 ConcurrentHashMap 的了解</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/c45230cb.html" title="mysql面试题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2025/10/23/wfbr2eNcL1VvXIn.png?_r_=c8b8c4d9-3b05-f070-2b01-ec5fb5e468d4" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mysql面试题"/></a><div class="content"><a class="title" href="/posts/c45230cb.html" title="mysql面试题">mysql面试题</a><time datetime="2025-10-27T03:31:36.000Z" title="发表于 2025-10-27 11:31:36">2025-10-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/66c016fb.html" title="JVM"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2025/10/23/w3ErpsQhncfDed2.jpg?_r_=073fb3c1-1ed6-85dc-4b49-6bade417019f" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM"/></a><div class="content"><a class="title" href="/posts/66c016fb.html" title="JVM">JVM</a><time datetime="2025-10-24T15:31:36.000Z" title="发表于 2025-10-24 23:31:36">2025-10-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/498cfd8e.html" title="并发编程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2025/10/23/w3ErpsQhncfDed2.jpg?_r_=e93610d2-afe5-62c9-ffac-34bc6ede57ce" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="并发编程"/></a><div class="content"><a class="title" href="/posts/498cfd8e.html" title="并发编程">并发编程</a><time datetime="2025-10-23T15:51:36.000Z" title="发表于 2025-10-23 23:51:36">2025-10-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/7edb9ee1.html" title="集合框架"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2025/10/23/g4UkwyDri9BWZtE.jpg?_r_=15bc3fef-3044-c8b4-4d1c-cc585f957842" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="集合框架"/></a><div class="content"><a class="title" href="/posts/7edb9ee1.html" title="集合框架">集合框架</a><time datetime="2025-10-23T08:48:49.330Z" title="发表于 2025-10-23 16:48:49">2025-10-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/aff6963e.html" title="如何解决高并发下的库存抢购超卖少买问题？"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2025/10/23/YUHOf5MZEItlGd3.jpg?_r_=1d335fd2-520a-5de8-b607-f2b3e5a780fa" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何解决高并发下的库存抢购超卖少买问题？"/></a><div class="content"><a class="title" href="/posts/aff6963e.html" title="如何解决高并发下的库存抢购超卖少买问题？">如何解决高并发下的库存抢购超卖少买问题？</a><time datetime="2025-10-23T04:24:36.000Z" title="发表于 2025-10-23 12:24:36">2025-10-23</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="北川" target="_blank">北川</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">5</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.png" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=2898229193&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/" style="font-size: 0.88rem;">JVM内存模型<sup>1</sup></a><a href="/tags/JVM%E8%B0%83%E4%BC%98/" style="font-size: 0.88rem;">JVM调优<sup>1</sup></a><a href="/tags/java%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">java教程<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 0.88rem;">mysql<sup>1</sup></a><a href="/tags/%E5%87%BD%E6%95%B0/" style="font-size: 0.88rem;">函数<sup>1</sup></a><a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 0.88rem;">反射<sup>1</sup></a><a href="/tags/%E5%A4%8D%E4%B9%A0/" style="font-size: 0.88rem;">复习<sup>1</sup></a><a href="/tags/%E5%A4%8D%E4%B9%A0-%E5%8F%98%E9%87%8F/" style="font-size: 0.88rem;">复习 变量<sup>1</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">工具<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 0.88rem;">并发<sup>1</sup></a><a href="/tags/%E6%83%85%E6%84%9F/" style="font-size: 0.88rem;">情感<sup>1</sup></a><a href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB-%E6%8E%A5%E5%8F%A3/" style="font-size: 0.88rem;">抽象类 接口<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 0.88rem;">数据库<sup>1</sup></a><a href="/tags/%E6%AF%8F%E6%97%A5%E9%9D%A2%E8%AF%95/" style="font-size: 0.88rem;">每日面试<sup>2</sup></a><a href="/tags/%E7%94%B5%E5%95%86-%E8%AE%A2%E5%8D%95/" style="font-size: 0.88rem;">电商,订单<sup>1</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 0.88rem;">设计模式<sup>1</sup></a><a href="/tags/%E8%B6%85%E5%8D%96-%E5%BA%93%E5%AD%98/" style="font-size: 0.88rem;">超卖 , 库存<sup>1</sup></a><a href="/tags/%E9%9B%86%E5%90%88/" style="font-size: 0.88rem;">集合<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="anzhiyufont anzhiyu-icon-comment-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8152976493&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2023 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.8",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 北川 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("04/01/2023 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      img.src = "";
      img.title = "";
      img.alt = "";

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><div class="js-pjax"><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '4GK2IcRZ0PX28gP4kGsW08qs-gzGzoHsz',
      appKey: 'TjKeHNK7GJrGTYuKYzGzh8yg',
      avatar: 'mp',
      serverURLs: '',
      emojiMaps: {"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png"},
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.cbd.int/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script src="https://cdn.cbd.int/blueimp-md5@2.19.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=mp'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://4GK2IcRZ.api.lncldglobal.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": '4GK2IcRZ0PX28gP4kGsW08qs-gzGzoHsz',
        "X-LC-Key": 'TjKeHNK7GJrGTYuKYzGzh8yg',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="//code.tidio.co/4nifo6zdbrmyjsngh2yzxwbnlhrvshrf.js" async="async"></script><script>(() => {
  const isChatBtn = true
  const isChatHideShow = true

  if (isChatBtn) {
    let isShow = false
    const close = () => {
      window.tidioChatApi.hide()
      isShow = false
    }
    
    const open = () => {
      window.tidioChatApi.open()
      window.tidioChatApi.show()
      isShow = true
    }

    const onTidioChatApiReady = () => {
      window.tidioChatApi.hide()
      window.tidioChatApi.on("close", close)
    }
    if (window.tidioChatApi) {
      window.tidioChatApi.on("ready", onTidioChatApiReady)
    } else {
      document.addEventListener("tidioChat-ready", onTidioChatApiReady)
    }

    window.chatBtnFn = () => {
      if (!window.tidioChatApi) return
      isShow ? close() : open()
    }
  } else if (isChatHideShow) {
    window.chatBtn = {
      hide: () => {
        window.tidioChatApi && window.tidioChatApi.hide()
      },
      show: () => {
        window.tidioChatApi && window.tidioChatApi.show()
      }
    }
  }
})()</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>